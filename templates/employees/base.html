{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}School Management System{% endblock %}</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" defer></script>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f8f9fa;
        }

        #wrapper {
            display: flex;
            transition: all 0.3s ease-in-out;
        }

        #sidebar {
            background-color: #343a40;
            color: white;
            width: 250px;
            min-height: 100vh;
            transition: all 0.3s ease-in-out;
            position: relative;
        }

        #sidebar a {
            color: #ffffff;
            padding: 10px;
            display: block;
        }

        #sidebar a:hover {
            background-color: #495057;
            text-decoration: none;
        }

        #sidebar .sidebar-heading {
            font-size: 1.5rem;
            padding: 1rem;
            background-color: #212529;
            text-align: center;
        }

        #menu-toggle {
            background-color: #007bff;
            color: white;
            border: none;
        }

        #menu-toggle:hover {
            background-color: #0056b3;
        }

        #wrapper.sidebar-hidden #sidebar {
            margin-left: -250px;
        }

        #wrapper.sidebar-hidden .content {
            margin-left: 0;
        }

        #sidebar .nav-link.active {
            background-color: #525d69;
            color: white;
        }



        /* Position the chevron at the top-right corner when hidden */
        @media (max-width: 768px) {
            #sidebar {
                position: absolute;
                z-index: 1000;
                width: 250px;
                left: -250px;
                top: 0;
            }

            #wrapper.sidebar-active #sidebar {
                left: 0;
            }

            #menu-toggle {
                position: absolute;
                top: 10px;
                right: 10px;
            }
        }

        .topbar {
            height: 50px;
        }

        .role-name {
            font-size: 25px;
            margin-left: 20px;
            margin-top: 16px;
            font-weight: bold;
            color: rgb(235, 12, 12);
        }
    </style>
    {% block style %}

    {% endblock %}
</head>

<body>
    <div id="wrapper">
        <!-- Sidebar -->
        <nav id="sidebar">
            <div class="sidebar-heading">
                <h5>School Management</h5>
            </div>
            <ul class="nav flex-column">
                <li class="nav-item">
                    <a href="{% url 'dashboard' %}"
                        class="nav-link {% if request.resolver_match.url_name == 'dashboard' %}active{% endif %}">Dashboard</a>
                </li>
                <li class="nav-item">
                    <a href="{% url 'students' %}"
                        class="nav-link {% if request.resolver_match.url_name == 'students' %}active{% endif %}">Students</a>
                </li>
                <li class="nav-item">
                    <a href="{% url 'teachers' %}"
                        class="nav-link {% if request.resolver_match.url_name == 'teachers' %}active{% endif %}">Employees</a>
                </li>
                <li class="nav-item">
                    <a href="{% url 'teachercloud' 0 %}"
                        class="nav-link {% if request.resolver_match.url_name == 'teachercloud' %}active{% endif %}">Teacher
                        Cloud</a>
                </li>
                <li class="nav-item">
                    <a href="{% url 'classes' %}"
                        class="nav-link {% if request.resolver_match.url_name == 'classes' %}active{% endif %}">Classes</a>
                </li>
                <li class="nav-item">
                    <a href="{% url 'subjects' %}"
                        class="nav-link {% if request.resolver_match.url_name == 'subjects' %}active{% endif %}">Subjects</a>
                </li>
                <li class="nav-item">
                    <a href="{% url 'reports' %}"
                        class="nav-link {% if request.resolver_match.url_name == 'reports' %}active{% endif %}">Reports</a>
                </li>
                <li class="nav-item">
                    <a href="{% url 'postnotes' %}"
                        class="nav-link {% if request.resolver_match.url_name == 'postnotes' %}active{% endif %}">Add
                        Notes</a>
                </li>
                <li class="nav-item">
                    <a href="{% url 'posthw' %}"
                        class="nav-link {% if request.resolver_match.url_name == 'posthw' %}active{% endif %}">Add
                        Homework</a>
                </li>
                <li class="nav-item">
                    <a href="{% url 'finance' %}"
                        class="nav-link {% if request.resolver_match.url_name == 'finance' %}active{% endif %}">Finance</a>
                </li>
                <li class="nav-item">
                    <a href="{% url 'settings' %}"
                        class="nav-link {% if request.resolver_match.url_name == 'settings' %}active{% endif %}">Settings</a>
                </li>
            </ul>



        </nav>
        <!-- /Sidebar -->

        <!-- Page Content -->
        <div class="flex-grow-1 content">
            <!-- Top Navbar -->
            <nav class="navbar navbar-expand-lg navbar-light bg-light border-bottom">
                <div class="container-fluid topbar">
                    <button class="btn" id="menu-toggle">â˜°</button>

                    <p class="role-name">{{user.role}} Portal - {{user.name}}
                    <p>

                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item">
                            <a href="{% url 'profile' %}" class="nav-link">Profile</a>
                        </li>
                        <li class="nav-item">
                            <a href="{% url 'logout' %}" class="nav-link">Logout</a>
                        </li>
                    </ul>
                </div>
            </nav>

            <!-- Main Content -->
            <div class="container mt-4">
                {% block content %} <!-- Page-specific content goes here --> {% endblock %}
            </div>
        </div>
        <!-- /Page Content -->
    </div>

    <script>
        const menuToggle = document.getElementById("menu-toggle");
        const wrapper = document.getElementById("wrapper");

        menuToggle.addEventListener("click", function () {
            // Toggle the sidebar visibility based on screen size
            if (window.innerWidth <= 768) {
                wrapper.classList.toggle("sidebar-active"); // Mobile: Sidebar slides in/out
            } else {
                wrapper.classList.toggle("sidebar-hidden"); // Desktop: Sidebar hides/shows
            }
        });

        // Ensure proper state on window resize
        window.addEventListener("resize", function () {
            if (window.innerWidth > 768) {
                wrapper.classList.remove("sidebar-active"); // Reset mobile toggle for larger screens
            }
        });
    </script>

</body>


{% block script %}

{% endblock %}

</html>